---
layout: home
title: Internationalisation des templates Thelia
sidebar: templates
lang: fr
subnav: templates_smarty_i18n
---

# Internationalisation

Si vous souhaitez créer des templates compatibles avec plusieurs langues, vous porterez une attention particulière :
If you want to create multilingual compatible templates, you have to pay a special attention to :
- aux textes statiques
- à la mise en forme de l'affichage des dates
- à la mise en forme de l'affichage des nombres
- à la mise en forme de l'affichage des devises

Thelia possède plusieurs fonctions Smarty pour vous aidez dans cette tâche.

## La fonction {intl}

La fonction `{intl}` traduit une chaîne dans la langue courante.

```smarty
{intl l="This is a string to translate"}
```
    ou

```smarty
{intl l="This is another string to translate" d="mymodule.ai"}
```

    ou

```smarty
{intl l="Hello, %name, how do you do ?" name={$name}}
```

Nous avons ci-dessus trois utilisation typiques de la fonction `{intl}`

### Le paramètre `l`

Le paramètre `l`contient la chaîne qui sera traduites. Cette chaîne ne devrait contenir aucune variable tel que `{intl l="Hello, $name, how do you do ?"}`, des varialbles internes devraient être utiliseés à la place. Chaque `%nom_variable`trouvé dans la chaîne sera remplacée par la valeur de la variable `nom_varaible`. Par exemple : `{intl l="Hello, %user, how do you do ?" user={$nom_utiilisateur}}` est parfaitement correct.

Si aucune traduction n'est trouvée pour une chaîne donnée, le tradcuteur retournera la valeur du paramètre `l`ou une chaîne vide en fonction des réglages de "Langues et URLS" dans le back-office.

### Le paramètre `d`

Le paramètre `d` définit le domaine des messages, un ensemble de message internationalisés. thelia contient les domaines suivants :

- `core` => pour les tradcustion du coeur de Thelia
- bo.*template_name* (eg : `bo.default`) => pour chaque template back-office
- fo.*template_name* (eg : `fo.default`) => pour chaque template front-office
- pdf.*template_name* (eg : `pdf.default`) => pour chaque template PDF
- email.*template_name* (eg : `email.default`) => pour chaque template email
- Dans les modules :
    - *module_code* (eg : `paypal`) => pour les traductions du coeur du module
    - *module_code*.ai (eg : `paypal.ai`) => utilisés dans  les templates AdminIncludes (N.B. : AdminIncludes est désormais déprécié)
    - *module_code*.bo.*template_name* (eg : `paypal.bo.default`) => utilisé dans les template back-office
    - *module_code*.fo.*template_name* (eg : `paypal.fo.default`) => utilisé dans les templates front-office

Ce paramètre est principalement utilisé dans les modules. D'autres templates (front-office, back-office, PDF et email) utilisent plutôt la fonction `{default_translation_domain}` pour définir des domaine de manière globale et le paramère `d` peut être omis.

Par exemple dans le gabarit `layout.tpl` du template front-office 'default', vous trouverez la déclaration suivante : `{default_translation_domain domain='fo.default'}`

### Le paramètre `js`

lors de l'utilisation de la fonction `{intl}` dans une chaîne Javascript, la chaîne traduite pourrait contenir des guillemets simples et/ou doubles qui devront être échappées pour ne pas provoquer des erreurs de syntaxe.

Pour ce faire utilisez le parmètre `js`qui échaperra les guillemets simples et doubles :
```smarty
var myString = '{intl l="A string with 'simple' and \"double\" quotes" js=1}';
```

Le résultat sera :
```javascript
var myString = 'A string \'simple\' and \"double\" quotes';
```

Vous pourriez également utuliser le modificateur Smarty `escape:'html'`:

```smarty
var myString = '{intl l="A string with 'simple' and \"double\" quotes"|escape:'html'}';
```

Dans ce cas le résutat sera :

```javascript
var myString = 'A string with &#039;simple&#039; and &quot;double&quot; quotes';
```

Le modificateur `quotes`pourrait aussi être utlisé avec précaution car il n'échappe que les guillement simples :

```smarty
var myString = '{intl l="A string with 'simple' and \"double\" quotes"|escape:'quotes'}';
```

produira :

```javascript
var myString = 'A string with \'simple\' and "double" quotes';
```

### Traduire vos templates

Les traductions sont effectuées depuis le back-office dans le menu "Configuration" -> "Traduction". Les chaînes à traduire sont automatiquement
retrouvées ans votre template et vous serez en mesure de saisir la traduction pour toutes les langues utilisées dans votre boutique (voir "Configuration" -> "Langues et URLs").


## La fonction {format_date}

Utilisez cette fonction pour formater une date conformément aux standard definis par la locale courante.

### Exemples

Renvoyer la date donnée sous forme de date et heure en utilisant le format propre à la locale
```smarty
    {format_date date=$dateTimeObject}
```

Renvoyer la date donnée en utilisant une format spécifique
```smarty
    {format_date date=$dateTimeObject format="Y-m-d H:i:s"}
```

Renvoyer la date donnée sous forme de texte en utilisant le format local
```smarty
    {format_date date=$dateTimeObject output="date"}
```

Renvoyer la date donnée sous forme d'heure en utilisant le format local
```smarty
    {format_date date=$dateTimeObject output="time"}
```

### Paramètres

- `date`: un objet DateTime (obligatoire)
- `format`: le format attendu. La format de la locale courante sera utilisée si ce paamètre est vide ou non défini
- `output`: le typre de sortie souhaité, les valeurs possibles sont :
    - `date`: la date uniquement
    - `time`: l'heure uniquement
    - `datetime`: la date et l'heure (defaut)


## La fonction {format_number}

Utilisez cette fonction pour formater une nombre conformément aux standard definis par la locale courante ou dans un format spécifique.

### Exemples

```smarty
{format_number number="1246.12" decimals="1" dec_point="," thousands_sep=" "}
```
affichera "1 246,1"

```smarty
{format_number number="1246.12"}
```
affichera "1246,12" si la locale est **fr_FR**, 1 246.12 si la locale est **en_US**


### Paramètres

- `number`: un nombre entier ou à virgule flottante
- `decimals`: nom de décimales à afficher
- `dec_point`: le caractère utiliser comme séparateur de décimales
- `thousands_sep`: le caractère utilisé comme séparateur des millers


## La fonction {format_money}

Utilisez cette fonction pour formater un montant conformément aux standard definis par la locale courante ou dans une format spécifique.

### Exemples

```smarty
{format_money number="1246.12" decimals="1" dec_point="," thousands_sep=" " symbol="€"}
```
affichera "1 246,1 €"

```smarty
{format_money number="1246.12"}
```
affichera "1246,12 €" si la locale est **fr_FR**, "€ 1 246.12" si la locale est **en_US**

### Paramètres

- `number`: un nombre entier ou à virgule flottante
- `decimals`: nom de décimales à afficher
- `dec_point`: le caractère utiliser comme séparateur de décimales
- `thousands_sep`: le caractère utilisé comme séparateur des millers
- `symbol`: symbole de la devise
- `remove_zero_decimal` (depuis la version  2.4.0) : ne pas afficher les décimales si ce sont des zéros. Exemple : 1234.00 € deveiendra 1234 €

**TBC**

## La fonction {format_address}

Utilisez cette fonction pour formater une adresse conformément aux standards du pays.

### Exemples

```smarty
{* formater l'adresse ayant l'identifiant 1 en HTML *}
{format_address address="1"}

{* formater l'adresse ayant l'identifiant 1 in HTML et en français (valeur par default est la langue définie en session) *}
{format_address address="1" locale="fr_FR"}

{* formater l'adresse ayant l'identifiant 1 en HTML avec des tag et attributs personnalisés *}
{format_address address="1" html_tag="address" html_class="customer-address" html_id="address1" }

{* formater l'adresse ayant l'identifiant 1 au format texte *}
{format_address address="1" html="0"}

{* formater l'adresse ayant l'identifiant 1 en étiquette postale *}
{format_address postal="1" address="1"}

{* formater l'adresse ayant l'identifiant 1 en étiquette postale et définir le pays d'origine (par défaut le pays de la boutique sinon le pays par défaut) *}
{format_address postal="1" address="1" origin_country='FR'}

{* formater l'adresse ayant l'identifiant 1 d'une commande *}
{format_address order_address="1"}

{* formater un adresse personnalisée *}
{format_address
    recipient="M. Barack Obama"
    organization="The White House"
    address_line1="1600 Pennsylvania Avenue NW"
    postal_code="20500"
    locality="Washington"
    country_code="US"
    administrative_area="US-DC"
}
```

### Paramètres

Address information:

- `address`: l'identifiant d'une adresse
- or `order_address`: une adresse d'une commande
- or une liste d'information séparée :
    - `country_code` : le code du pays (ex. : US pour les Etats-Unis)
    - `administrative_area` : état ou la province (ex. : US-CA)
    - `locality` : la ville
    - `dependent_locality`
    - `postal_code`
    - `sorting_code`
    - `address_line1`
    - `address_line2`
    - `organization`
    - `recipient`

Options de mise en forme :

- `postal` : (booléen) formate l'adresse en tant qu'étiquette postale. Prend en charge la gestion des caractères majuscules si nécessaire (pour falciliter la tri automatique des lettre par exemple). Par défault : `false`.
- `origin_country` : utilisé quand `postal`est à `true`pour définir le pays d'origine permettant de diff"renceier les couriers internationaux des couriers nationaux. La valeur par défaut est le pays de la boutique ou le pays par défaut si le pays de la boutique n'est pas défini.
- `html` : (booléen) formater l'adresse en HTML (`true`)  ou au format texte (`false`).
- `html_tag` : Le tag HTML encadrant le code HTML si `html`est utilisé. Par défaut la balise `<p>`est ulisée
- `html_*` : liste des attributs à ajoutés à la balise principale, par exemple : `html_class="address"` génèrera `<p class="address">...`
- `locale` : la locale à utiliser pour générer le nom du pays. Par défaut la locale de la session courante.
